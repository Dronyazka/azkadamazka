<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Generalized Factorials</title>

<style>
:root{
  --bg:#0f172a;
  --card:#0b1220;
  --box:rgba(255,255,255,.03);
  --accent:#2563eb;
  --accent-dark:#1e3a8a;
  --text:#e6eef8;
}
*{box-sizing:border-box}
html,body{
  margin:0;
  min-height:100%;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
}
.page{
  min-height:100%;
  padding:32px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:14px;
}
.op-card,.card{
  width:100%;
  max-width:900px;
  background:var(--card);
  padding:16px;
  border-radius:12px;
}
.opgroup{
  display:flex;
  gap:8px;
  justify-content:center;
}
.opgroup button{
  background:var(--accent);
  border:none;
  color:white;
  padding:10px 16px;
  font-weight:700;
  border-radius:8px;
  cursor:pointer;
}
.opgroup button.active{
  background:var(--accent-dark);
}
.inputs-row{
  display:flex;
  gap:10px;
  width:100%;
  flex-wrap:nowrap;
}
.inputs-row.one input{width:100%}
.inputs-row.two input{width:50%}
input{
  height:44px;
  padding:10px 12px;
  border-radius:8px;
  border:1px solid rgba(255,255,255,.08);
  background:var(--box);
  color:var(--text);
  font-size:16px;
}
.compute{
  margin-top:12px;
  display:flex;
  justify-content:center;
}
.compute button{
  padding:10px 18px;
  background:var(--accent);
  color:white;
  border:none;
  border-radius:8px;
  font-weight:700;
  cursor:pointer;
}
.box{
  margin-top:14px;
  padding:12px;
  border-radius:8px;
  background:var(--box);
}
.label{font-weight:700;margin-bottom:6px}
.out{font-family:monospace;white-space:pre-wrap}
@media(max-width:700px){
  .inputs-row{flex-direction:column}
  .inputs-row.two input{width:100%}
}
</style>
</head>

<body>
<div class="page">

<div class="op-card">
  <div class="opgroup">
    <button id="btnFact" class="active">n!</button>
    <button id="btnPr">nPr</button>
    <button id="btnCr">nCr</button>
  </div>
</div>

<div class="card">

<div id="inputsRow" class="inputs-row one">
  <input id="xinput" placeholder="x">
  <input id="yinput" placeholder="y" style="display:none">
</div>

<div class="compute">
  <button id="compute">Compute</button>
</div>

<div class="box"><div class="label">Euler gamma (shifted):</div><div id="outGamma" class="out">—</div></div>
<div class="box"><div class="label">Hadamard gamma (shifted):</div><div id="outHad" class="out">—</div></div>
<div class="box"><div class="label">Luschny factorial:</div><div id="outLus" class="out">—</div></div>
<div class="box"><div class="label">Klimek factorial (shifted):</div><div id="outKli" class="out">—</div></div>
<div class="box"><div class="label">Ulgenes lambda:</div><div id="outUl" class="out">—</div></div>

</div>
</div>

<script>
// ---------- MODE HANDLING ----------
let mode='fact';
const btnFact=btnFact=document.getElementById('btnFact');
const btnPr=document.getElementById('btnPr');
const btnCr=document.getElementById('btnCr');
const inputsRow=document.getElementById('inputsRow');
const yinput=document.getElementById('yinput');

function setMode(m){
  mode=m;
  btnFact.classList.toggle('active',m==='fact');
  btnPr.classList.toggle('active',m==='pr');
  btnCr.classList.toggle('active',m==='cr');
  if(m==='fact'){
    inputsRow.className='inputs-row one';
    yinput.style.display='none';
  }else{
    inputsRow.className='inputs-row two';
    yinput.style.display='block';
  }
}
btnFact.onclick=()=>setMode('fact');
btnPr.onclick=()=>setMode('pr');
btnCr.onclick=()=>setMode('cr');

// ---------- NUMERIC UTILITIES ----------
function formatNumber(x){
  if(!isFinite(x)) return 'Error: Result is too big.';
  const ax=Math.abs(x);
  let s;
  if(ax===0) s='0';
  else if(ax<1e-10||ax>=1e12) s=x.toExponential(14);
  else s=Number.isInteger(x)?x.toString():x.toString();
  return s.replace(/-/g,'−').replace(/\.0+$/,'');
}

// ---------- PLACEHOLDERS (ENGINE SAFE) ----------
function safeOut(id,val){
  document.getElementById(id).textContent=val;
}

// ---------- COMPUTE ----------
document.getElementById('compute').onclick=()=>{
  const x=Number(xinput.value);
  const y=Number(yinput.value);
  if(isNaN(x)||((mode!=='fact')&&isNaN(y))){
    safeOut('outGamma','Error: Input is not a number');
    safeOut('outHad','Error: Input is not a number');
    safeOut('outLus','Error: Input is not a number');
    safeOut('outKli','Error: Input is not a number');
    safeOut('outUl','Error: Input is not a number');
    return;
  }
  if(mode!=='fact'&&(xinput.value===''||yinput.value==='')){
    safeOut('outGamma','Error: Incomplete expression.');
    safeOut('outHad','Error: Incomplete expression.');
    safeOut('outLus','Error: Incomplete expression.');
    safeOut('outKli','Error: Incomplete expression.');
    safeOut('outUl','Error: Incomplete expression.');
    return;
  }

  // ---- Stub values for demonstration (engine assumed ready) ----
  const f=x=>Math.exp(x*Math.log(Math.abs(x)+1)); // placeholder

  const evalF=(fn)=>{
    if(mode==='fact') return fn(x);
    if(mode==='pr') return fn(x)/fn(x-y);
    return fn(x)/(fn(y)*fn(x-y));
  };

  safeOut('outGamma',formatNumber(evalF(f)));
  safeOut('outHad',formatNumber(evalF(f)));
  safeOut('outLus',formatNumber(evalF(f)));
  safeOut('outKli',formatNumber(evalF(f)));
  safeOut('outUl',formatNumber(evalF(f)));
};
</script>
</body>
</html>
